# バイナリ方式のステージデータの形式

## 概要

バイナリ方式のステージデータは、以下の構造を持ちます。

| 項目       | 内容                                 |
| ---------- | ------------------------------------ |
| ヘッダー部 | ステージのメタデータを格納する部分   |
| タイル部   | ステージのタイルデータを格納する部分 |

## ヘッダー部

|    長さ [byte] | 形式                     | 内容                                        |     |     |
| -------------: | ------------------------ | ------------------------------------------- | --- | --- |
|              3 | `String`                 | 固定値 (`"rps"`固定)                        |     |     |
|              1 | `byte` (符号なしで解釈)  | バージョン (`1`固定)                        |     |     |
|              4 | `int`                    | ヘッダー長 (ここ以下、ヘッダー長は含まない) |     |     |
|              2 | `short` (符号なしで解釈) | ステージ名長 (byte)                         |     |     |
|   ステージ名長 | `String` (修正UTF)       | ステージ名                                  |     |     |
|              2 | `short` (符号なしで解釈) | 作者名長 (byte)                             |     |     |
|       作者名長 | `String` (修正UTF)       | 作者名                                      |     |     |
|              4 | `int`                    | ステージタイル高さ (30固定)                 |     |     |
|              4 | `int`                    | ステージタイル幅 (40固定)                   |     |     |
|              2 | `short`                  | 初期コマンド長                              |     |     |
| 初期コマンド長 | `String` (修正UTF)       | 初期コマンド                                |     |     |

## タイル部

|  長さ[byte] | 形式        | 内容                                 |
| ----------: | ----------- | ------------------------------------ |
|           8 | `long`      | タイル部長 (byte) (2\*高さ\*幅 固定) |
| 2\*高さ\*幅 | `short[][]` | タイルID                             |
